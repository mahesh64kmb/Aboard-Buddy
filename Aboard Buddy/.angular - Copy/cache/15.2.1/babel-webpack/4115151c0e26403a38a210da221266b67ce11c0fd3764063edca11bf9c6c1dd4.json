{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/core/services\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction PostAddComponent_div_11_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r6.updateError);\n  }\n}\nfunction PostAddComponent_div_11_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r7.updateSuccess);\n  }\n}\nfunction PostAddComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostAddComponent_div_11_p_1_Template, 2, 1, \"p\", 16);\n    i0.ɵɵtemplate(2, PostAddComponent_div_11_p_2_Template, 2, 1, \"p\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.updateError);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.updateSuccess);\n  }\n}\nfunction PostAddComponent_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r8 == null ? null : item_r8.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r8 == null ? null : item_r8.value, \" \");\n  }\n}\nfunction PostAddComponent_option_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r9 == null ? null : item_r9.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r9 == null ? null : item_r9.value, \" \");\n  }\n}\nfunction PostAddComponent_div_28_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function PostAddComponent_div_28_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const i_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.removeImg(i_r11));\n    });\n    i0.ɵɵtext(1, \"Remove\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PostAddComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵelement(1, \"img\", 22);\n    i0.ɵɵtemplate(2, PostAddComponent_div_28_button_2_Template, 2, 0, \"button\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const img_r10 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", (img_r10 == null ? null : img_r10.url) ? img_r10 == null ? null : img_r10.url : ctx_r3.propertyImgUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r3.propertyImages == null ? null : ctx_r3.propertyImages.length) > 1);\n  }\n}\nfunction PostAddComponent_button_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function PostAddComponent_button_32_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.onSubmit());\n    });\n    i0.ɵɵtext(1, \"POST AD\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PostAddComponent_button_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵtext(1, \"POSTING AD...\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class PostAddComponent {\n  constructor(fb, adService, router) {\n    this.fb = fb;\n    this.adService = adService;\n    this.router = router;\n    this.updateError = '';\n    this.updateSuccess = '';\n    this.userId = '';\n    this.propertyTypes = [{\n      id: \"Accommodation\",\n      value: \"Accommodation\"\n    }, {\n      id: \"Furniture\",\n      value: \"Furniture\"\n    }, {\n      id: \"Electronics\",\n      value: \"Electronics\"\n    }, {\n      id: \"Vehicles\",\n      value: \"Vehicles\"\n    }];\n    this.dealTypes = [{\n      id: \"Sell\",\n      value: \"Sell\"\n    }, {\n      id: \"Lease\",\n      value: \"Lease\"\n    }];\n    this.propertyImgUrl = \"http://dairysystem.in/Buddy/admin/uploads/student/no_image.png\";\n    this.propertyImages = [];\n  }\n  ngOnInit() {\n    this.userId = localStorage.getItem('userId');\n    this.addForm = this.fb.group({\n      student_id: [this.userId, Validators.required],\n      property_type: ['', Validators.required],\n      select_option: ['', Validators.required],\n      description: ['', Validators.required],\n      image: ['']\n    });\n  }\n  // Image Preview\n  onChangeImage(event) {\n    const reader = new FileReader();\n    if (event.target.files && event.target.files.length) {\n      const [file] = event.target.files;\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        this.propertyImages.push({\n          url: reader.result,\n          file: event.target.files[0]\n        });\n        // this.propertyImgUrl = reader.result as string;\n        // this.addForm.get('image')?.patchValue(event.target.files[0])\n      };\n    }\n  }\n\n  get getControls() {\n    return this.addForm.controls;\n  }\n  onSubmit() {\n    this.updateError = \"\";\n    this.updateSuccess = \"\";\n    this.isLoading = true;\n    this.submited = true;\n    if (this.addForm.invalid) {\n      this.updateError = \"All fields are required*\";\n      this.addForm.markAllAsTouched();\n      this.isLoading = false;\n      return;\n    }\n    let value = this.addForm.value;\n    let keys = Object.keys(value);\n    let data = new FormData();\n    keys.forEach(key => {\n      if (key != \"image\") {\n        data.append(key, value[key]);\n      }\n    });\n    this.propertyImages.forEach(file => {\n      data.append(\"images[]\", file?.file);\n    });\n    this.adService.postAd(data).subscribe(res => {\n      if (res?.status == '200') {\n        this.updateSuccess = \"Ad posted successfully...\";\n        setTimeout(() => {\n          this.router.navigate(['/seller/advertise/my-adds']);\n          this.isLoading = false;\n        }, 1500);\n      } else {\n        this.isLoading = false;\n        this.updateError = res?.message ? res?.message : 'Something went wrong, try again';\n      }\n    }, error => {\n      this.updateError = 'Something went wrong, try again';\n      this.isLoading = false;\n    });\n  }\n  removeImg(i = 0) {\n    this.propertyImages.splice(i, 1);\n  }\n}\nPostAddComponent.ɵfac = function PostAddComponent_Factory(t) {\n  return new (t || PostAddComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AdvertiseService), i0.ɵɵdirectiveInject(i3.Router));\n};\nPostAddComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostAddComponent,\n  selectors: [[\"app-post-add\"]],\n  decls: 34,\n  vars: 11,\n  consts: [[1, \"container\"], [1, \"row\"], [3, \"formGroup\"], [1, \"col-md-9\"], [\"class\", \"col-md-12\", 4, \"ngIf\"], [1, \"col-md-12\", \"col-sm-12\"], [\"formControlName\", \"property_type\", 1, \"form-select\", 3, \"ngClass\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"select_option\", 1, \"form-select\", 3, \"ngClass\"], [\"cols\", \"30\", \"rows\", \"5\", \"placeholder\", \"Description of property\", \"formControlName\", \"description\", 1, \"form-control\", 3, \"ngClass\"], [\"type\", \"file\", \"name\", \"files[]\", \"placeholder\", \"Property Image\", \"formControlName\", \"image\", 1, \"form-control\", 3, \"ngClass\", \"change\"], [\"class\", \"col-md-2 col-sm-2\", 4, \"ngFor\", \"ngForIndex\", \"ngForOf\"], [\"class\", \"btn btn-primary post-button\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-primary post-button\", 4, \"ngIf\"], [1, \"col-md-12\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"class\", \"text-success\", 4, \"ngIf\"], [1, \"text-danger\"], [1, \"text-success\"], [3, \"value\"], [1, \"col-md-2\", \"col-sm-2\"], [\"alt\", \"\", 1, \"responsive-img\", 3, \"src\"], [\"class\", \"remove-img-button\", 3, \"click\", 4, \"ngIf\"], [1, \"remove-img-button\", 3, \"click\"], [1, \"btn\", \"btn-primary\", \"post-button\", 3, \"click\"], [1, \"btn\", \"btn-primary\", \"post-button\"]],\n  template: function PostAddComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\")(1, \"div\", 0)(2, \"div\", 1)(3, \"h2\");\n      i0.ɵɵtext(4, \"POST an Ad\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 1)(6, \"form\", 2)(7, \"div\", 0)(8, \"div\", 1)(9, \"div\", 3)(10, \"div\", 1);\n      i0.ɵɵtemplate(11, PostAddComponent_div_11_Template, 3, 2, \"div\", 4);\n      i0.ɵɵelementStart(12, \"div\", 5)(13, \"select\", 6)(14, \"option\", 7);\n      i0.ɵɵtext(15, \" Property Type \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(16, PostAddComponent_option_16_Template, 2, 2, \"option\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 5)(18, \"select\", 9)(19, \"option\", 7);\n      i0.ɵɵtext(20, \" Select an Option \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(21, PostAddComponent_option_21_Template, 2, 2, \"option\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"div\", 1)(23, \"div\", 5);\n      i0.ɵɵelement(24, \"textarea\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(25, \"div\", 1)(26, \"div\", 5)(27, \"input\", 11);\n      i0.ɵɵlistener(\"change\", function PostAddComponent_Template_input_change_27_listener($event) {\n        return ctx.onChangeImage($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(28, PostAddComponent_div_28_Template, 3, 2, \"div\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(29, \"div\", 1);\n      i0.ɵɵelementStart(30, \"div\", 1)(31, \"div\", 5);\n      i0.ɵɵtemplate(32, PostAddComponent_button_32_Template, 2, 0, \"button\", 13);\n      i0.ɵɵtemplate(33, PostAddComponent_button_33_Template, 2, 0, \"button\", 14);\n      i0.ɵɵelementEnd()()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"formGroup\", ctx.addForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.updateError || ctx.updateSuccess);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", (ctx.submited || (ctx.getControls == null ? null : ctx.getControls.property_type == null ? null : ctx.getControls.property_type.touched)) && (ctx.getControls == null ? null : ctx.getControls.property_type == null ? null : ctx.getControls.property_type.errors) ? \"invalid-input\" : \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.propertyTypes);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", (ctx.submited || (ctx.getControls == null ? null : ctx.getControls.select_option == null ? null : ctx.getControls.select_option.touched)) && (ctx.getControls == null ? null : ctx.getControls.select_option == null ? null : ctx.getControls.select_option.errors) ? \"invalid-input\" : \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.dealTypes);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngClass\", (ctx.submited || (ctx.getControls == null ? null : ctx.getControls.description == null ? null : ctx.getControls.description.touched)) && (ctx.getControls == null ? null : ctx.getControls.description == null ? null : ctx.getControls.description.errors) ? \"invalid-input\" : \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngClass\", (ctx.submited || (ctx.getControls == null ? null : ctx.getControls.image == null ? null : ctx.getControls.image.touched)) && !(ctx.propertyImages == null ? null : ctx.propertyImages.length) ? \"invalid-input\" : \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.propertyImages);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"h2[_ngcontent-%COMP%] {\\n    text-align: center;\\n    padding-top: 30px;\\n}\\n\\nform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%], label[_ngcontent-%COMP%] {\\n    margin: 10px;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n    width: 200px;\\n    margin: 20px;\\n    margin-top: 10px;\\n    margin-bottom: 50px;\\n    background: #4E6E81;\\n    border: none;\\n}\\n\\n.responsive-img[_ngcontent-%COMP%]{\\n  max-width: 350px;\\n  height: auto;\\n  width: 100%;\\n  margin-left: 15px;\\n}\\n.post-button[_ngcontent-%COMP%]{\\n    width: 100%;\\n    height: 55px;\\n    margin-top: 20px;\\n}\\n.remove-img-button[_ngcontent-%COMP%]{\\n    margin-left: 35px;\\n    background-color: red;\\n    color: white;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYWxsLW1vZHVsZXMvc2VsbGVyLXBhZ2VzL2FkdmVydGlzZS9wb3N0LWFkZC9wb3N0LWFkZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksa0JBQWtCO0lBQ2xCLGlCQUFpQjtBQUNyQjs7QUFFQTs7OztJQUlJLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxZQUFZO0lBQ1osWUFBWTtJQUNaLGdCQUFnQjtJQUNoQixtQkFBbUI7SUFDbkIsbUJBQW1CO0lBQ25CLFlBQVk7QUFDaEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLFdBQVc7RUFDWCxpQkFBaUI7QUFDbkI7QUFDQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osZ0JBQWdCO0FBQ3BCO0FBQ0E7SUFDSSxpQkFBaUI7SUFDakIscUJBQXFCO0lBQ3JCLFlBQVk7QUFDaEIiLCJzb3VyY2VzQ29udGVudCI6WyJoMiB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmctdG9wOiAzMHB4O1xufVxuXG5mb3JtIGlucHV0LFxuc2VsZWN0LFxuLmZvcm0tY29udHJvbCxcbmxhYmVsIHtcbiAgICBtYXJnaW46IDEwcHg7XG59XG5cbi5idG4ge1xuICAgIHdpZHRoOiAyMDBweDtcbiAgICBtYXJnaW46IDIwcHg7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICBtYXJnaW4tYm90dG9tOiA1MHB4O1xuICAgIGJhY2tncm91bmQ6ICM0RTZFODE7XG4gICAgYm9yZGVyOiBub25lO1xufVxuXG4ucmVzcG9uc2l2ZS1pbWd7XG4gIG1heC13aWR0aDogMzUwcHg7XG4gIGhlaWdodDogYXV0bztcbiAgd2lkdGg6IDEwMCU7XG4gIG1hcmdpbi1sZWZ0OiAxNXB4O1xufVxuLnBvc3QtYnV0dG9ue1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogNTVweDtcbiAgICBtYXJnaW4tdG9wOiAyMHB4O1xufVxuLnJlbW92ZS1pbWctYnV0dG9ue1xuICAgIG1hcmdpbi1sZWZ0OiAzNXB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbiAgICBjb2xvcjogd2hpdGU7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAAgCA,UAAU,QAAQ,gBAAgB;;;;;;;;ICY9BC,6BAA4C;IAAAA,YAAe;IAAAA,iBAAI;;;;IAAnBA,eAAe;IAAfA,wCAAe;;;;;IAC3DA,6BAA+C;IAAAA,YAAiB;IAAAA,iBAAI;;;;IAArBA,eAAiB;IAAjBA,0CAAiB;;;;;IAFpEA,+BAA4D;IACxDA,qEAA+D;IAC/DA,qEAAoE;IACxEA,iBAAM;;;;IAFuBA,eAAiB;IAAjBA,yCAAiB;IAChBA,eAAmB;IAAnBA,2CAAmB;;;;;IAKzCA,kCAA+D;IAACA,YAAgB;IAAAA,iBAAS;;;;IAAjFA,2DAAkB;IAAsCA,eAAgB;IAAhBA,uEAAgB;;;;;IAMhFA,kCAA2D;IAACA,YAAgB;IAAAA,iBAAS;;;;IAA7EA,2DAAkB;IAAkCA,eAAgB;IAAhBA,uEAAgB;;;;;;IAgBhFA,kCAA0F;IAAvBA;MAAAA;MAAA;MAAA;MAAA,OAASA,uCAAY;IAAA,EAAC;IAACA,sBAAM;IAAAA,iBAAS;;;;;IAF7GA,+BAA+E;IAC3EA,0BAA4E;IAC5EA,+EAAyG;IAC7GA,iBAAM;;;;;IAFGA,eAAwC;IAAxCA,6IAAwC;IACVA,eAA8B;IAA9BA,gGAA8B;;;;;;IAOjEA,kCAAqF;IAArBA;MAAAA;MAAA;MAAA,OAASA,iCAAU;IAAA,EAAC;IAACA,uBAAO;IAAAA,iBAAS;;;;;IACrGA,kCAA8D;IAAAA,6BAAa;IAAAA,iBAAS;;;ADrCxH,OAAM,MAAOC,gBAAgB;EAc3BC,YAAoBC,EAAe,EAAUC,SAA2B,EAAWC,MAAa;IAA5E,OAAE,GAAFF,EAAE;IAAuB,cAAS,GAATC,SAAS;IAA6B,WAAM,GAANC,MAAM;IATzF,gBAAW,GAAG,EAAE;IAChB,kBAAa,GAAG,EAAE;IAClB,WAAM,GAAM,EAAE;IAEd,kBAAa,GAAG,CAAC;MAACC,EAAE,EAAC,eAAe;MAAEC,KAAK,EAAC;IAAe,CAAC,EAAE;MAACD,EAAE,EAAC,WAAW;MAAEC,KAAK,EAAC;IAAW,CAAC,EAAE;MAACD,EAAE,EAAC,aAAa;MAAEC,KAAK,EAAC;IAAa,CAAC,EAAE;MAACD,EAAE,EAAC,UAAU;MAAEC,KAAK,EAAC;IAAU,CAAC,CAAC;IAC9K,cAAS,GAAG,CAAC;MAACD,EAAE,EAAC,MAAM;MAAEC,KAAK,EAAC;IAAM,CAAC,EAAE;MAACD,EAAE,EAAC,OAAO;MAAEC,KAAK,EAAC;IAAO,CAAC,CAAC;IACpE,mBAAc,GAAO,gEAAgE;IACrF,mBAAc,GAAM,EAAE;EAE8E;EAEpGC,QAAQ;IACN,IAAI,CAACC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAC5C,IAAI,CAACC,OAAO,GAAG,IAAI,CAACT,EAAE,CAACU,KAAK,CAAC;MACvBC,UAAU,EAAC,CAAC,IAAI,CAACL,MAAM,EAAEV,UAAU,CAACgB,QAAQ,CAAC;MAC7CC,aAAa,EAAE,CAAC,EAAE,EAAEjB,UAAU,CAACgB,QAAQ,CAAC;MACxCE,aAAa,EAAE,CAAC,EAAE,EAAElB,UAAU,CAACgB,QAAQ,CAAC;MACxCG,WAAW,EAAC,CAAC,EAAE,EAAEnB,UAAU,CAACgB,QAAQ,CAAC;MACrCI,KAAK,EAAC,CAAC,EAAE;KACd,CAAC;EACJ;EAEA;EACAC,aAAa,CAACC,KAAS;IACrB,MAAMC,MAAM,GAAG,IAAIC,UAAU,EAAE;IAE/B,IAAGF,KAAK,CAACG,MAAM,CAACC,KAAK,IAAIJ,KAAK,CAACG,MAAM,CAACC,KAAK,CAACC,MAAM,EAAE;MAClD,MAAM,CAACC,IAAI,CAAC,GAAGN,KAAK,CAACG,MAAM,CAACC,KAAK;MACjCH,MAAM,CAACM,aAAa,CAACD,IAAI,CAAC;MAC1BL,MAAM,CAACO,MAAM,GAAG,MAAK;QACnB,IAAI,CAACC,cAAc,CAACC,IAAI,CAAC;UAACC,GAAG,EAACV,MAAM,CAACW,MAAgB;UAAEN,IAAI,EAACN,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC;QAAC,CAAE,CAAC;QACpF;QACA;MACF,CAAC;;EAEL;;EAEA,IAAIS,WAAW;IACb,OAAO,IAAI,CAACtB,OAAO,CAACuB,QAAQ;EAC9B;EAIAC,QAAQ;IACN,IAAI,CAACC,WAAW,GAAK,EAAE;IACvB,IAAI,CAACC,aAAa,GAAG,EAAE;IACvB,IAAI,CAACC,SAAS,GAAO,IAAI;IACzB,IAAI,CAACC,QAAQ,GAAQ,IAAI;IACzB,IAAG,IAAI,CAAC5B,OAAO,CAAC6B,OAAO,EAAC;MACtB,IAAI,CAACJ,WAAW,GAAG,0BAA0B;MAC7C,IAAI,CAACzB,OAAO,CAAC8B,gBAAgB,EAAE;MAC/B,IAAI,CAACH,SAAS,GAAG,KAAK;MACtB;;IAGF,IAAIhC,KAAK,GAAG,IAAI,CAACK,OAAO,CAACL,KAAK;IAC9B,IAAIoC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACpC,KAAK,CAAC;IAE7B,IAAIsC,IAAI,GAAG,IAAIC,QAAQ,EAAE;IACzBH,IAAI,CAACI,OAAO,CAACC,GAAG,IAAE;MAChB,IAAGA,GAAG,IAAI,OAAO,EAAC;QAChBH,IAAI,CAACI,MAAM,CAACD,GAAG,EAAEzC,KAAK,CAACyC,GAAG,CAAC,CAAC;;IAEhC,CAAC,CAAC;IACF,IAAI,CAAClB,cAAc,CAACiB,OAAO,CAAEpB,IAAQ,IAAG;MACtCkB,IAAI,CAACI,MAAM,CAAC,UAAU,EAAEtB,IAAI,EAAEA,IAAI,CAAC;IACrC,CAAC,CAAC;IAEF,IAAI,CAACvB,SAAS,CAAC8C,MAAM,CAACL,IAAI,CAAC,CAACM,SAAS,CAAEC,GAAO,IAAG;MAC/C,IAAGA,GAAG,EAAEC,MAAM,IAAI,KAAK,EAAC;QACtB,IAAI,CAACf,aAAa,GAAG,2BAA2B;QAChDgB,UAAU,CAAC,MAAI;UACb,IAAI,CAACjD,MAAM,CAACkD,QAAQ,CAAC,CAAC,2BAA2B,CAAC,CAAC;UAClD,IAAI,CAAChB,SAAS,GAAG,KAAK;QACzB,CAAC,EAAE,IAAI,CAAC;OAET,MAAI;QACH,IAAI,CAACA,SAAS,GAAG,KAAK;QACtB,IAAI,CAACF,WAAW,GAAGe,GAAG,EAAEI,OAAO,GAACJ,GAAG,EAAEI,OAAO,GAAC,iCAAiC;;IAElF,CAAC,EAAEC,KAAK,IAAE;MACR,IAAI,CAACpB,WAAW,GAAG,iCAAiC;MACpD,IAAI,CAACE,SAAS,GAAG,KAAK;IACxB,CAAC,CAAC;EAEJ;EAEAmB,SAAS,CAACC,CAAC,GAAC,CAAC;IACZ,IAAI,CAAC7B,cAAc,CAAC8B,MAAM,CAACD,CAAC,EAAE,CAAC,CAAC;EACjC;;AA9FW1D,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA,gBAAgB;EAAA4D;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZ7BjE,+BAAS;MAGOA,0BAAU;MAAAA,iBAAK;MAEvBA,8BAAiB;MAOOA,mEAGM;MACNA,+BAAiC;MAEPA,gCAAc;MAAAA,iBAAS;MACzCA,yEAAyF;MAC7FA,iBAAS;MAEbA,+BAAiC;MAEPA,mCAAiB;MAAAA,iBAAS;MAC5CA,yEAAqF;MACzFA,iBAAS;MAIjBA,+BAAiB;MAETA,gCAAsP;MAC1PA,iBAAM;MAEVA,+BAAiB;MAE4EA;QAAA,OAAUkE,yBAAqB;MAAA,EAAC;MAArHlE,iBAAoP;MAExPA,oEAGM;MAEVA,iBAAM;MACNA,0BAAuB;MACvBA,+BAAiB;MAETA,0EAAqG;MACrGA,0EAAoF;MACxFA,iBAAM;;;MA5CpBA,eAAqB;MAArBA,uCAAqB;MAMiBA,eAAkC;MAAlCA,2DAAkC;MAKMA,eAAwH;MAAxHA,oTAAwH;MAEpIA,eAAiB;MAAjBA,2CAAiB;MAILA,eAAwH;MAAxHA,oTAAwH;MAEpIA,eAAa;MAAbA,uCAAa;MAOyDA,eAAoH;MAApHA,4SAAoH;MAK5FA,eAAqG;MAArGA,8OAAqG;MAExMA,eAAmB;MAAnBA,4CAAmB;MAShBA,eAAgB;MAAhBA,qCAAgB;MACjBA,eAAe;MAAfA,oCAAe","names":["Validators","i0","PostAddComponent","constructor","fb","adService","router","id","value","ngOnInit","userId","localStorage","getItem","addForm","group","student_id","required","property_type","select_option","description","image","onChangeImage","event","reader","FileReader","target","files","length","file","readAsDataURL","onload","propertyImages","push","url","result","getControls","controls","onSubmit","updateError","updateSuccess","isLoading","submited","invalid","markAllAsTouched","keys","Object","data","FormData","forEach","key","append","postAd","subscribe","res","status","setTimeout","navigate","message","error","removeImg","i","splice","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\saisu\\Desktop\\abroadbuddy-main\\abroadbuddy-main\\src\\app\\all-modules\\seller-pages\\advertise\\post-add\\post-add.component.ts","C:\\Users\\saisu\\Desktop\\abroadbuddy-main\\abroadbuddy-main\\src\\app\\all-modules\\seller-pages\\advertise\\post-add\\post-add.component.html"],"sourcesContent":["import { Component, OnInit} from '@angular/core';\nimport { FormGroup,FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AdvertiseService, UserService } from 'src/app/core/services';\nimport { DataService } from 'src/app/shared/services';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-post-add',\n  templateUrl: './post-add.component.html',\n  styleUrls: ['./post-add.component.css']\n})\nexport class PostAddComponent implements OnInit {\n  addForm:FormGroup;\n  \n  submited: boolean; \n  isLoading:boolean; \n  updateError = ''; \n  updateSuccess = '';\n  userId:any ='';\n\n  propertyTypes = [{id:\"Accommodation\", value:\"Accommodation\"}, {id:\"Furniture\", value:\"Furniture\"}, {id:\"Electronics\", value:\"Electronics\"}, {id:\"Vehicles\", value:\"Vehicles\"}]\n  dealTypes = [{id:\"Sell\", value:\"Sell\"}, {id:\"Lease\", value:\"Lease\"}]\n  propertyImgUrl:any = \"http://dairysystem.in/Buddy/admin/uploads/student/no_image.png\";\n  propertyImages:any =[];\n\n  constructor(private fb: FormBuilder, private adService: AdvertiseService,  private router:Router) { }\n  \n  ngOnInit(): void {\n    this.userId = localStorage.getItem('userId');\n    this.addForm = this.fb.group({\n          student_id:[this.userId, Validators.required],\n          property_type :['', Validators.required], \n          select_option :['', Validators.required], \n          description:['', Validators.required],\n          image:['',],\n    });\n  }\n\n  // Image Preview\n  onChangeImage(event:any) {\n    const reader = new FileReader();\n    \n    if(event.target.files && event.target.files.length) {\n      const [file] = event.target.files;\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        this.propertyImages.push({url:reader.result as string, file:event.target.files[0] })\n        // this.propertyImgUrl = reader.result as string;\n        // this.addForm.get('image')?.patchValue(event.target.files[0])\n      };\n    }\n  }\n\n  get getControls(){\n    return this.addForm.controls;\n  }\n\n  \n\n  onSubmit(){\n    this.updateError   = \"\";\n    this.updateSuccess = \"\";\n    this.isLoading     = true;\n    this.submited      = true;\n    if(this.addForm.invalid){\n      this.updateError = \"All fields are required*\";\n      this.addForm.markAllAsTouched();\n      this.isLoading = false;\n      return;\n    }\n\n    let value = this.addForm.value;\n    let keys = Object.keys(value);\n\n    let data = new FormData();\n    keys.forEach(key=>{\n      if(key != \"image\"){\n        data.append(key, value[key]);\n      }\n    })\n    this.propertyImages.forEach((file:any)=>{\n      data.append(\"images[]\", file?.file);\n    })\n    \n    this.adService.postAd(data).subscribe((res:any)=>{\n      if(res?.status == '200'){\n        this.updateSuccess = \"Ad posted successfully...\";\n        setTimeout(()=>{\n          this.router.navigate(['/seller/advertise/my-adds']);\n           this.isLoading = false;\n        }, 1500)\n\n      }else{\n        this.isLoading = false;\n        this.updateError = res?.message?res?.message:'Something went wrong, try again';\n      }\n    }, error=>{\n      this.updateError = 'Something went wrong, try again';\n      this.isLoading = false;\n    })\n\n  }\n\n  removeImg(i=0){\n   this.propertyImages.splice(i, 1);\n  }\n}\n","<section>\n    <div class=\"container\">\n        <div class=\"row\">\n            <h2>POST an Ad</h2>\n        </div>\n        <div class=\"row\">\n            <form [formGroup]=\"addForm\" >\n                <div class=\"container\">\n                    <div class=\"row\">\n                        \n                        <div class=\"col-md-9\">\n                            <div class=\"row\">\n                                <div class=\"col-md-12\" *ngIf=\"updateError || updateSuccess\">\n                                    <p class=\"text-danger\"  *ngIf=\"updateError\">{{updateError}}</p>\n                                    <p class=\"text-success\"  *ngIf=\"updateSuccess\">{{updateSuccess}}</p>\n                                </div>\n                                <div class=\"col-md-12 col-sm-12\">\n                                    <select class=\"form-select\" formControlName=\"property_type\" [ngClass]=\"((submited || getControls?.property_type?.touched) && getControls?.property_type?.errors)?'invalid-input':''\" >\n                                        <option value=\"\"> Property Type </option>\n                                        <option [value]=\"item?.id\" *ngFor=\"let item of propertyTypes;\"> {{item?.value}} </option>\n                                    </select>\n                                </div>\n                                <div class=\"col-md-12 col-sm-12\">\n                                    <select class=\"form-select\" formControlName=\"select_option\" [ngClass]=\"((submited || getControls?.select_option?.touched) && getControls?.select_option?.errors)?'invalid-input':''\">\n                                        <option value=\"\"> Select an Option </option>\n                                        <option [value]=\"item?.id\" *ngFor=\"let item of dealTypes;\"> {{item?.value}} </option>\n                                    </select>\n                                </div>\n                            </div>\n                            \n                            <div class=\"row\">\n                                <div class=\"col-md-12 col-sm-12\">\n                                    <textarea class=\"form-control\" cols=\"30\" rows=\"5\" placeholder=\"Description of property\" formControlName=\"description\" [ngClass]=\"((submited || getControls?.description?.touched) && getControls?.description?.errors)?'invalid-input':''\"></textarea>\n                                </div>\n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-md-12 col-sm-12\">\n                                    <input type=\"file\" class=\"form-control\" name=\"files[]\" placeholder=\"Property Image\"  (change)=\"onChangeImage($event)\" formControlName=\"image\" [ngClass]=\"((submited || getControls?.image?.touched) && !propertyImages?.length)?'invalid-input':''\">\n                                </div>\n                                <div class=\"col-md-2 col-sm-2\" *ngFor=\"let img of propertyImages; let i index\">\n                                    <img [src]=\"img?.url?img?.url:propertyImgUrl\" alt=\"\" class=\"responsive-img\">\n                                    <button class=\"remove-img-button\" *ngIf=\"propertyImages?.length>1\" (click)=\"removeImg(i)\">Remove</button>\n                                </div>\n                                \n                            </div>\n                            <div class=\"row\"></div>\n                            <div class=\"row\">\n                                <div class=\"col-md-12 col-sm-12\">\n                                    <button  class=\"btn btn-primary post-button\" *ngIf=\"!isLoading\" (click)=\"onSubmit()\">POST AD</button>\n                                    <button class=\"btn btn-primary post-button\" *ngIf=\"isLoading\">POSTING AD...</button>\n                                </div>\n                            </div>\n                         </div>\n                         <!-- <div class=\"col-md-3\">\n                            \n                        </div> -->\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</section>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}